# Local vs Production Environment Setup

## Local Development (.env)

Your `.env` file for local testing:

```env
DEBUG=True
SECRET_KEY=django-insecure-local-dev-key-for-testing-only
ALLOWED_HOSTS=127.0.0.1,localhost
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
```

**Features:**
- âœ… HTTP works (no HTTPS required)
- âœ… Emails print to console
- âœ… Detailed error messages
- âœ… Auto-reload on code changes
- âœ… SQLite database (no setup needed)

**To run:**
```bash
python manage.py runserver
```

Visit: http://127.0.0.1:8000/

---

## Production Environment (Render)

Set these in Render Dashboard â†’ Environment Variables:

### Required:
```env
DEBUG=False
SECRET_KEY=<auto-generated-by-render>
ALLOWED_HOSTS=zuhayran-oil-and-gas.onrender.com
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-gmail-app-password
DEFAULT_FROM_EMAIL=your-email@gmail.com
```

### Pre-configured in render.yaml:
```env
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
PYTHON_VERSION=3.13.0
```

**Features:**
- âœ… HTTPS enforced
- âœ… Real emails sent via Gmail
- âœ… Generic error pages (secure)
- âœ… Static files compressed
- âœ… Production-ready database

---

## Switching Between Environments

### Local Testing:
1. Make sure `.env` file exists with DEBUG=True
2. Run: `python manage.py runserver`
3. Access: http://127.0.0.1:8000/

### Production Deploy:
1. Commit changes: `git add . && git commit -m "Update"`
2. Push to GitHub: `git push origin main`
3. Render auto-deploys
4. Access: https://zuhayran-oil-and-gas.onrender.com

---

## Email Configuration

### Local (Console Backend):
Emails print to terminal - no real emails sent.

**Test the contact form:**
1. Submit form at http://127.0.0.1:8000/contact/
2. Check terminal for email output
3. Both emails (to company and user) appear in console

### Production (SMTP Backend):
Real emails sent via Gmail.

**Setup Gmail App Password:**
1. Enable 2FA on Gmail account
2. Go to: https://myaccount.google.com/apppasswords
3. Generate app password for "Mail"
4. Copy the 16-character password
5. Set as `EMAIL_HOST_PASSWORD` in Render

---

## Database Configuration

### Local:
SQLite (db.sqlite3) - automatic, no setup needed.

### Production:
Two options:

**Option 1: SQLite (Default)**
- Works out of the box
- Limited concurrent connections
- OK for low traffic (<1000 users/day)

**Option 2: PostgreSQL (Recommended)**
- Better performance and scalability
- In Render: Add PostgreSQL database
- Copy "Internal Database URL"
- Set as `DATABASE_URL` environment variable
- Django auto-detects and uses it

---

## Static Files

### Local:
- Served automatically by Django
- Whitenoise not required (but active)
- No need to run `collectstatic`

### Production:
- Served by Whitenoise (configured in settings.py)
- Compressed and cached
- `collectstatic` runs during build
- CDN-level performance

---

## Security Differences

### Local (DEBUG=True):
- âŒ HTTPS not enforced
- âŒ Detailed error pages shown
- âŒ Security headers relaxed
- âœ… OK for testing

### Production (DEBUG=False):
- âœ… HTTPS enforced
- âœ… Generic error pages
- âœ… Full security headers
- âœ… HSTS enabled (1 year)
- âœ… Secure cookies

---

## Troubleshooting

### Local server won't start:
```bash
# Check for errors
python manage.py check

# Try different port
python manage.py runserver 8080
```

### Production deploy fails:
- Check Render build logs
- Verify all required env vars are set
- Ensure requirements.txt is up to date

### Emails not working locally:
- That's normal! Check terminal for output
- Emails print to console, not sent

### Emails not working in production:
- Verify EMAIL_HOST_USER and EMAIL_HOST_PASSWORD
- Check Gmail app password is correct
- Ensure 2FA enabled on Gmail

---

## Quick Reference

| Feature | Local | Production |
|---------|-------|------------|
| URL | http://127.0.0.1:8000 | https://your-site.onrender.com |
| DEBUG | True | False |
| HTTPS | No | Yes (forced) |
| Emails | Console | Real (SMTP) |
| Database | SQLite | SQLite/PostgreSQL |
| Static Files | Django | Whitenoise |
| Security | Relaxed | Full |

---

**Happy coding!** ðŸš€

For detailed guides, see:
- `DEVELOPMENT.md` - Local development
- `RENDER_DEPLOYMENT.md` - Render deployment
- `DEPLOYMENT.md` - General deployment
